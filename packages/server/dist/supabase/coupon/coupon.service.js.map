{"version":3,"sources":["../../../src/supabase/coupon/coupon.service.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { SupabaseService } from '../supabase.service';\nimport { Coupon } from '../../types';\nimport { ERROR_LOG_PREFIX } from '../../constants/messages';\n\n@Injectable()\nexport class CouponService {\n  constructor(private supabaseService: SupabaseService) {}\n\n  async saveCoupon(name: string): Promise<Coupon[]> {\n    const { data, error } = await this.supabaseService\n      .getClient()\n      .from('coupon')\n      .insert([{ name: name }])\n      .select();\n\n    if (error) {\n      console.error(ERROR_LOG_PREFIX.SUPABASE_ERROR_DETAILS, {\n        message: error.message,\n        code: error.code,\n        details: error.details,\n        hint: error.hint,\n      });\n      throw error;\n    }\n\n    return data as Coupon[];\n  }\n\n  async getAllCoupons(): Promise<Coupon[]> {\n    const { data, error } = await this.supabaseService\n      .getClient()\n      .from('coupon')\n      .select('*');\n\n    if (error) {\n      console.error(ERROR_LOG_PREFIX.SUPABASE_ERROR_DETAILS, {\n        message: error.message,\n        code: error.code,\n        details: error.details,\n        hint: error.hint,\n      });\n      throw error;\n    }\n\n    return data as Coupon[];\n  }\n}\n"],"names":["CouponService","saveCoupon","name","data","error","supabaseService","getClient","from","insert","select","console","ERROR_LOG_PREFIX","SUPABASE_ERROR_DETAILS","message","code","details","hint","getAllCoupons"],"mappings":";;;;+BAMaA;;;eAAAA;;;wBANc;iCACK;0BAEC;;;;;;;;;;AAG1B,IAAA,AAAMA,gBAAN,MAAMA;IAGX,MAAMC,WAAWC,IAAY,EAAqB;QAChD,MAAM,EAAEC,IAAI,EAAEC,KAAK,EAAE,GAAG,MAAM,IAAI,CAACC,eAAe,CAC/CC,SAAS,GACTC,IAAI,CAAC,UACLC,MAAM,CAAC;YAAC;gBAAEN,MAAMA;YAAK;SAAE,EACvBO,MAAM;QAET,IAAIL,OAAO;YACTM,QAAQN,KAAK,CAACO,0BAAgB,CAACC,sBAAsB,EAAE;gBACrDC,SAAST,MAAMS,OAAO;gBACtBC,MAAMV,MAAMU,IAAI;gBAChBC,SAASX,MAAMW,OAAO;gBACtBC,MAAMZ,MAAMY,IAAI;YAClB;YACA,MAAMZ;QACR;QAEA,OAAOD;IACT;IAEA,MAAMc,gBAAmC;QACvC,MAAM,EAAEd,IAAI,EAAEC,KAAK,EAAE,GAAG,MAAM,IAAI,CAACC,eAAe,CAC/CC,SAAS,GACTC,IAAI,CAAC,UACLE,MAAM,CAAC;QAEV,IAAIL,OAAO;YACTM,QAAQN,KAAK,CAACO,0BAAgB,CAACC,sBAAsB,EAAE;gBACrDC,SAAST,MAAMS,OAAO;gBACtBC,MAAMV,MAAMU,IAAI;gBAChBC,SAASX,MAAMW,OAAO;gBACtBC,MAAMZ,MAAMY,IAAI;YAClB;YACA,MAAMZ;QACR;QAEA,OAAOD;IACT;IAvCA,YAAY,AAAQE,eAAgC,CAAE;aAAlCA,kBAAAA;IAAmC;AAwCzD"}